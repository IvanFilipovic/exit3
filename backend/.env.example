# ============================================
# Exit Three Django Backend - Environment Configuration
# ============================================
# Copy this file to .env and update the values
# NEVER commit .env to version control!

# ============================================
# Django Core Settings
# ============================================

# CRITICAL: Generate a new secret key for production
# Generate with: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=django-insecure-CHANGE-THIS-IN-PRODUCTION-use-get-random-secret-key

# Debug mode (MUST be False in production)
DEBUG=False

# Environment name (development, staging, production)
DJANGO_ENV=production

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=exit3.online,www.exit3.online,localhost,127.0.0.1

# ============================================
# Database Configuration (PostgreSQL)
# ============================================

DB_ENGINE=django.db.backends.postgresql
DB_NAME=exit3_db
DB_USER=postgres
DB_PASSWORD=your-secure-database-password-here-CHANGE-ME
DB_HOST=db
DB_PORT=5432

# ============================================
# API Authentication
# ============================================

# Basic API Key (CRITICAL: Keep this secret!)
# Generate with: python -c 'import secrets; print(secrets.token_urlsafe(48))'
BASIC_API_KEY=your-api-key-here-CHANGE-ME

# ============================================
# CORS Configuration
# ============================================

# Comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=https://exit3.online,https://www.exit3.online

# CSRF Trusted Origins
CSRF_TRUSTED_ORIGINS=https://exit3.online,https://www.exit3.online

# ============================================
# Redis (Caching & Celery)
# ============================================

REDIS_PASSWORD=your-redis-password-CHANGE-ME
REDIS_PORT=6379
REDIS_URL=redis://:your-redis-password-CHANGE-ME@redis:6379/0

# ============================================
# Static & Media Files
# ============================================

STATIC_ROOT=/var/www/exit3/static
STATIC_URL=/static/
MEDIA_ROOT=/var/www/exit3/media
MEDIA_URL=/media/

# ============================================
# Email Configuration (Optional)
# ============================================

EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_USE_SSL=False
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password

# Default from email
DEFAULT_FROM_EMAIL=noreply@exit3.online
SERVER_EMAIL=admin@exit3.online

# ============================================
# Security Settings
# ============================================

# HTTPS settings (enable in production)
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# ============================================
# Monitoring & Error Tracking
# ============================================

# Sentry DSN (optional but recommended)
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# Docker Configuration
# ============================================

# Django container port
DJANGO_PORT=8000

# Nginx ports
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# pgAdmin (optional - for database management UI)
PGADMIN_EMAIL=admin@exit3.online
PGADMIN_PASSWORD=your-pgadmin-password-CHANGE-ME
PGADMIN_PORT=5050

# ============================================
# Logging
# ============================================

LOG_LEVEL=INFO

# ============================================
# Rate Limiting
# ============================================

# Requests per minute
RATE_LIMIT_ANON=100/hour
RATE_LIMIT_USER=1000/hour
RATE_LIMIT_LEAD_CREATE=10/hour

# ============================================
# Celery (Optional - for async tasks)
# ============================================

# CELERY_BROKER_URL=redis://:your-redis-password-CHANGE-ME@redis:6379/0
# CELERY_RESULT_BACKEND=redis://:your-redis-password-CHANGE-ME@redis:6379/0
# CELERY_TASK_SERIALIZER=json
# CELERY_ACCEPT_CONTENT=['json']
# CELERY_TIMEZONE=UTC

# ============================================
# Development Settings (only for local dev)
# ============================================

# Uncomment for development
# DEBUG=True
# ALLOWED_HOSTS=*
# CORS_ALLOW_ALL_ORIGINS=True
# SECURE_SSL_REDIRECT=False
# SESSION_COOKIE_SECURE=False
# CSRF_COOKIE_SECURE=False
